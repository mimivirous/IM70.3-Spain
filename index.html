<!-- Chosen Palette: Coastal Horizon (Main: White/Light Gray, Accent: Indigo-600, Secondary Accent: Amber-600) -->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ironman 西班牙 12 日探索儀表板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f7f7f7; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { max-width: 600px; height: 400px; }
        }
        .timeline-dot {
            position: absolute;
            left: -15px;
            top: 5px;
            width: 15px;
            height: 15px;
            background-color: #4f46e5;
            border-radius: 50%;
            border: 3px solid #f7f7f7;
        }
        .timeline-item { position: relative; padding-left: 20px; border-left: 2px solid #e0e0e0; margin-bottom: 20px; }
    </style>
</head>
<body class="antialiased text-gray-800">

    <!-- Header Navigation -->
    <header class="sticky top-0 z-50 bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-indigo-600">🇪🇸 Ironman 西班牙 (12日行程)</h1>
            <nav class="space-x-4">
                <a href="#dashboard" class="text-gray-600 hover:text-indigo-600 transition duration-150 font-medium hidden sm:inline">儀表板</a>
                <a href="#itinerary" class="text-gray-600 hover:text-indigo-600 transition duration-150 font-medium">行程時間軸</a>
                <a href="#logistics" class="text-gray-600 hover:text-indigo-600 transition duration-150 font-medium hidden sm:inline">物流/費用</a>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- Dashboard Section -->
        <section id="dashboard" class="mb-12">
            <h2 class="text-3xl font-extrabold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">🎯 旅程概覽與準備行動</h2>
            <p class="mb-8 text-gray-600">
                本儀表板匯集了 **12 日**西班牙之旅的關鍵數據。11/4 抵達馬德里後直接前往托雷多，開啟精彩旅程！
            </p>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-10">
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-indigo-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">總日數</p>
                    <p id="stat-days" class="text-3xl font-bold text-indigo-800">12</p>
                </div>
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-indigo-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">參與人數</p>
                    <p id="stat-people" class="text-3xl font-bold text-indigo-800">8 位</p>
                </div>
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-amber-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">交通工具</p>
                    <p id="stat-transport" class="text-3xl font-bold text-amber-800">2 輛租車</p>
                </div>
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-amber-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">比賽地點</p>
                    <p id="stat-race" class="text-xl font-bold text-amber-800 mt-1">Marbella</p>
                </div>
            </div>

            <!-- Interactive Checklist -->
            <div class="p-6 bg-white rounded-xl shadow-2xl">
                <h3 class="text-xl font-bold text-indigo-600 mb-4">✅ 行前準備清單</h3>
                <p class="text-sm text-gray-500 mb-4">點擊項目即可追蹤完成狀態。</p>
                <div id="checklist-container" class="space-y-3">
                    <!-- Checklist items will be injected here by JS -->
                </div>
            </div>
        </section>

        <!-- Itinerary Section (Timeline) -->
        <section id="itinerary" class="mb-12 pt-10">
            <h2 class="text-3xl font-extrabold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">📅 12 日行程時間軸 (點擊查看細節)</h2>
            <p class="mb-8 text-gray-600">
                從托雷多古城到馬貝拉海灘，從格拉納達的阿爾罕布拉宮到塞維亞的佛朗明哥，精彩 12 天等你探索！
            </p>

            <div id="timeline-container" class="relative">
                <!-- Timeline items will be injected here by JS -->
            </div>
        </section>

        <!-- Logistics & Cost Section -->
        <section id="logistics" class="pt-10">
            <h2 class="text-3xl font-extrabold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">💰 物流與費用分析</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Logistics Summary Card -->
                <div class="p-6 bg-white rounded-xl shadow-2xl flex flex-col justify-center">
                    <h3 class="text-xl font-bold text-indigo-600 mb-3">🚗 核心物流決策</h3>
                    <div class="space-y-4 text-gray-700">
                        <div class="p-3 bg-indigo-50 rounded-lg">
                            <p class="font-semibold text-indigo-800">交通方案 (已確認)</p>
                            <p>租賃 **2 輛車**，全程自駕。每台租金 $8,600（11/4-11/14全包），舒適容納 8 人和所有行李，行程彈性最高。</p>
                        </div>
                        <div class="p-3 bg-amber-50 rounded-lg">
                            <p class="font-semibold text-amber-800">自行車處理 (已確認)</p>
                            <p>Ironman 選手（雅菁、皓中哥、光武）的自行車將在馬貝拉 **當地租賃**，免去長途運輸的麻煩。</p>
                        </div>
                        <div class="p-3 bg-indigo-50 rounded-lg">
                            <p class="font-semibold text-indigo-800">住宿總結</p>
                            <p>住宿安排以公寓和精品酒店為主，總費用約 $144,699。馬貝拉期間光武爸媽另外住宿，馬德里分兩處住宿。</p>
                        </div>
                    </div>
                </div>

                <!-- Cost Chart Container -->
                <div>
                    <h3 class="text-xl font-bold text-indigo-600 mb-4 text-center">總預估費用 (約 NT$<span id="total-cost">596,599</span>) 分佈</h3>
                    <p class="text-sm text-center text-gray-500 mb-2">單位：新台幣 (TWD) | 每人約 $74,575</p>
                    <div class="chart-container shadow-2xl rounded-xl bg-white p-4">
                        <canvas id="costBreakdownChart"></canvas>
                    </div>
                    <div class="mt-4 p-3 bg-amber-50 rounded-lg text-sm text-gray-600">
                        <p class="font-semibold text-amber-800 mb-2">💡 交通費用明細（預估）：</p>
                        <ul class="space-y-1 text-xs">
                            <li>• 租車含保險：$17,200（2台 × $8,600）</li>
                            <li>• 油費：$15,700（約3,020km，預估）</li>
                            <li>• 停車費：$3,500（市區停車，預估）</li>
                            <li>• 過路費：$1,500（高速公路，預估）</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="mt-12 py-6 bg-gray-100 text-center text-sm text-gray-500">
        <p>&copy; 2025 Ironman 西班牙團隊規劃 | 資料更新日期：2025/10/29</p>
    </footer>

    <script>
        const TRIP_DATA = {
            totalDays: 12,
            totalPeople: 8,
            raceLocation: "Marbella, Spain",
            estimatedCost: 596599,
            costBreakdown: [
                { label: "國際機票 (8人)", amount: 304000, percentage: 50.95, color: 'rgba(79, 70, 229, 0.8)' },
                { label: "住宿 (11晚)", amount: 144699, percentage: 24.25, color: 'rgba(234, 88, 12, 0.8)' },
                { label: "餐費與活動", amount: 110000, percentage: 18.44, color: 'rgba(251, 191, 36, 0.8)' },
                { label: "租車/油費/停車費 (預估)", amount: 37900, percentage: 6.35, color: 'rgba(129, 140, 248, 0.8)' }
            ]
        };

        let CHECKLIST_STATE = [
            { id: 1, text: "確認所有成員護照效期超過 6 個月", completed: false },
            { id: 2, text: "完成 2 輛租車預訂 (含保險)", completed: true },
            { id: 3, text: "確認所有駕駛國際駕照 (IDP) 效期", completed: false },
            { id: 4, text: "所有住宿預訂確認與付款", completed: true },
            { id: 5, text: "Ironman 賽事報到文件準備（雅菁、皓中哥、光武）", completed: false },
            { id: 6, text: "確認租賃自行車的尺寸與領取地點", completed: false },
            { id: 7, text: "購買旅行/意外/醫療保險", completed: false },
            { id: 8, text: "預訂阿爾罕布拉宮門票（需提前）", completed: false },
            { id: 9, text: "預訂佛朗明哥表演門票", completed: false },
            { id: 10, text: "預訂普拉多博物館、馬德里王宮門票（Klook）", completed: false },
        ];

        const ITINERARY_DATA = [
            { 
                day: 1, 
                date: "11/4 (二)", 
                location: "馬德里 → 托雷多", 
                title: "馬德里 → 托雷多", 
                transport: "12:40 抵達馬德里，14:30 領取租車，自駕至托雷多 (1hr 15min)。", 
                details: "下午抵達馬德里機場後領取 2 輛租車，直接驅車前往世界遺產城市托雷多。抵達後入住酒店稍作休息，傍晚前往 Mirador del Valle 欣賞托雷多全景日落。晚餐後早點休息，幫助調整時差。", 
                activities: ["12:40 抵達馬德里", "14:30 領取租車", "15:30-16:00 抵達托雷多並 check-in", "16:00-17:00 小休/市區逛逛", "18:00 Mirador del Valle 看日落", "20:15 晚餐", "22:00 休息調整時差"]
            },
            { 
                day: 2, 
                date: "11/5 (三)", 
                location: "托雷多 → 格拉納達", 
                title: "托雷多 → 格拉納達", 
                transport: "SUV 自駕 (托雷多-格拉納達: 4hr，含20-30分鐘休息)。", 
                details: "早晨晨跑或散步後享用早餐。上午參觀托雷多主教堂，這座哥德式建築是西班牙天主教的總教堂，以其華麗的祭壇和藝術收藏聞名。午餐後出發前往格拉納達，這是前往馬貝拉前最長的駕駛路段，請確保駕駛輪替與中途休息。傍晚抵達格拉納達入住。", 
                activities: ["07:30 晨跑/散步", "08:30 早餐", "10:00 托雷多主教堂", "12:00 午餐", "13:30 出發", "中途休息 20-30 分鐘", "18:00 抵達格拉納達", "20:00 晚餐"]
            },
            { 
                day: 3, 
                date: "11/6 (四)", 
                location: "格拉納達 → 馬貝拉", 
                title: "格拉納達 → 馬貝拉", 
                transport: "SUV 自駕 (格拉納達-馬貝拉: 2hr)。", 
                details: "清晨 8:00 前往世界遺產阿爾罕布拉宮（建議提前購票或現場碰運氣）。重點遊覽納斯里德宮的精緻伊斯蘭建築、赫內拉利費宮的美麗花園，阿爾卡薩瓦軍事要塞可視時間彈性參觀。11:30 離開宮殿，在市區用餐（可外帶）後出發前往馬貝拉。下午抵達後，Ironman 選手進行報到與 EXPO 參觀。", 
                activities: ["8:00 阿爾罕布拉宮（購票碰運氣）", "08:30-09:45 納斯里德宮", "09:45-11:00 赫內拉利費宮與花園", "11:00-11:30 彈性時間", "11:30 離開，午餐", "13:00 出發往馬貝拉", "16:00-16:30 抵達馬貝拉並 check-in", "17:00-18:00 選手報到 + EXPO"]
            },
            { 
                day: 4, 
                date: "11/7 (五)", 
                location: "馬貝拉", 
                title: "馬貝拉（賽事準備）", 
                transport: "市區內移動。", 
                details: "全天賽事準備。選手（雅菁）領取租賃自行車、參加 EXPO、進行海域試游、熟悉賽道環境。女子組選手完成轉換區 Check-in。非選手可在海灘休閒或探索馬貝拉舊城區。晚餐採高碳水飲食，為明日比賽儲備能量。早點休息確保充足睡眠。", 
                activities: ["領取租賃自行車（雅菁）", "EXPO 參觀", "海域試游", "賽道勘查", "女生轉換區 Check-in", "高碳水晚餐", "早點休息"]
            },
            { 
                day: 5, 
                date: "11/8 (六)", 
                location: "馬貝拉", 
                title: "✨ 馬貝拉（女子組賽事）", 
                transport: "SUV 協助後勤。", 
                details: "8:00 女子組開賽！雅菁挑戰全程鐵人三項。親友團在轉換區、關鍵補給點與終點線為選手加油打氣。同日男子組選手（皓中哥、光武）領取自行車並完成轉換區 Check-in，為明日比賽做準備。晚上為女子組選手慶祝完賽，男子組選手早點休息養精蓄銳。", 
                activities: ["8:00 雅菁開賽（女子組）", "親友團關鍵點位加油", "男生領取自行車（皓中哥、光武）", "男生轉換區 Check-in", "晚餐慶祝/早休息"]
            },
            { 
                day: 6, 
                date: "11/9 (日)", 
                location: "馬貝拉", 
                title: "🔥 馬貝拉（男子組賽事）", 
                transport: "SUV 協助後勤。", 
                details: "8:00 男子組開賽！皓中哥與光武挑戰全程鐵人三項：游泳 3.8km → 自行車 180km → 跑步 42.2km。親友團在轉換區、自行車與跑步賽道關鍵點位加油打氣，見證選手跨越終點線的榮耀時刻。下午男子組完成轉換區 Check-out。晚上全體慶祝晚宴，為三位鐵人喝采！", 
                activities: ["8:00 男子組開賽（皓中哥、光武）", "游泳 (3.8km)", "自行車 (180km)", "跑步 (42.2km)", "終點線慶祝", "下午轉換區 Check-out", "慶祝晚宴"]
            },
            { 
                day: 7, 
                date: "11/10 (一)", 
                location: "馬貝拉 → 隆達 → 塞維亞", 
                title: "馬貝拉 → 隆達 → 塞維亞", 
                transport: "SUV 自駕 (馬貝拉-隆達-塞維亞: 3hr 5min，含隆達停留 2hr)。", 
                details: "早餐後退房並歸還租賃自行車。10:30 驅車前往著名懸崖小鎮隆達，12:00 抵達後參觀橫跨 120 公尺深峽谷的新橋（Puente Nuevo）與老城區，在隆達享用午餐並短暫休息約 2 小時。14:00 離開隆達，可在 Zahara 短暫停留。16:30 抵達塞維亞入住，晚餐後可選擇觀賞佛朗明哥表演（也可安排在明日）。", 
                activities: ["8:00 早餐", "9:30 退房、還自行車", "10:30 出發", "12:00 抵達隆達", "隆達新橋 & 老城（約 2hr）", "14:00 離開隆達", "16:30 抵達塞維亞", "20:00 晚餐/佛朗明哥秀（可選）"]
            },
            { 
                day: 8, 
                date: "11/11 (二)", 
                location: "塞維亞", 
                title: "塞維亞（深度遊）", 
                transport: "市區內移動（步行為主）。", 
                details: "全天探索安達魯西亞首府塞維亞。參觀世界遺產塞維亞王宮（Alcázar）的精美摩爾式建築與庭園，接著前往塞維亞大教堂（世界第三大教堂）與希拉達塔（登塔可俯瞰全城）。下午前往壯麗的西班牙廣場拍照留念，漫步聖十字區的白色小巷與橘樹街道。晚上觀賞正宗佛朗明哥表演，感受安達魯西亞的熱情靈魂。", 
                activities: ["水道橋", "塞維亞王宮（Alcázar）", "大教堂 + 希拉達塔", "西班牙廣場", "聖十字區漫步", "晚上佛朗明哥表演"]
            },
            { 
                day: 9, 
                date: "11/12 (三)", 
                location: "塞維亞 → 梅里達 → 卡塞雷斯", 
                title: "塞維亞 → 梅里達 → 卡塞雷斯", 
                transport: "SUV 自駕 (塞維亞-卡塞雷斯: 2hr，含梅里達停留)。", 
                details: "上午補齊塞維亞遺珠景點或購物（如都市陽傘、黃金塔等）。中午出發，途經梅里達（Mérida）這座古羅馬城市，參觀保存完好的羅馬劇院與競技場，感受 2000 年前羅馬帝國的輝煌。下午抵達世界遺產城市卡塞雷斯，這座中世紀古城完整保留了文藝復興時期的建築風貌。傍晚在老城區散步，享用當地美食。", 
                activities: ["上午塞維亞購物/遺珠景點", "中午出發", "梅里達羅馬劇院與競技場", "下午抵達卡塞雷斯", "卡塞雷斯老城區散步", "晚餐"]
            },
            { 
                day: 10, 
                date: "11/13 (四)", 
                location: "卡塞雷斯 → 馬德里", 
                title: "卡塞雷斯 → 特魯希略 → Oropesa → 馬德里", 
                transport: "SUV 自駕 (卡塞雷斯-馬德里: 3.5hr / 297km，含停留)。", 
                details: "7:00 晨跑 30 分鐘後享用早餐，9:00 離開卡塞雷斯。09:45 抵達特魯希略（征服者皮薩羅的故鄉），在主廣場（Plaza Mayor）喝咖啡並散步 40-60 分鐘，欣賞城堡遠景。10:45 出發前往中世紀小鎮 Oropesa（約 1.5 小時），12:15 抵達後參觀 Castillo de Oropesa 城堡，13:30 在城堡旁的 Parador de Oropesa 餐廳享用午餐。15:00 出發前往馬德里（約 1.5 小時），16:30-17:00 抵達馬德里住宿並歸還租車。晚上在 Gran Vía 或麗池公園輕鬆散步。", 
                activities: ["7:00 晨跑 30min", "8:00 早餐", "9:00 出發", "09:45 抵達特魯希略", "12:15 抵達 Oropesa", "13:30 午餐", "15:00 出發往馬德里", "16:30-17:00 抵達馬德里、還車", "20:00 晚餐 + 散步"]
            },
            { 
                day: 11, 
                date: "11/14 (五)", 
                location: "馬德里", 
                title: "馬德里（市區觀光）", 
                transport: "市區內移動（地鐵/步行）。", 
                details: "完整一天探索西班牙首都馬德里。上午參觀世界三大美術館之一的普拉多博物館（Museo del Prado），欣賞維拉斯奎茲、哥雅、波希等大師的經典作品。下午參觀華麗的馬德里王宮（Palacio Real），這座歐洲最大的王宮擁有 3000 多個房間（建議提前在 Klook 購票以節省時間）。傍晚在馬約爾廣場（Plaza Mayor）、太陽門廣場（Puerta del Sol）享受西班牙最後一晚的美好時光。晚上在 Gran Vía 大道購物或享用告別晚餐。", 
                activities: ["普拉多博物館", "馬德里王宮", "馬約爾廣場", "太陽門廣場", "Gran Vía 購物", "告別晚餐"]
            },
            { 
                day: 12, 
                date: "11/15 (六)", 
                location: "馬德里 → 台灣", 
                title: "馬德里 → 台灣", 
                transport: "11:00 前往馬德里機場，14:25 國際航班起飛。", 
                details: "上午整理行李，在住宿附近享用最後的西班牙早餐，品嚐 Churros 配巧克力或咖啡。11:00 前搭乘地鐵或計程車前往馬德里巴拉哈斯機場（Adolfo Suárez Madrid-Barajas Airport），預留充足時間辦理報到與退稅手續。14:25 搭乘國際航班返回台灣，帶著滿滿的回憶、Ironman 完賽的榮耀與西班牙的熱情，踏上歸途。¡Hasta luego, España!", 
                activities: ["整理行李", "最後的西班牙早餐", "11:00 前往機場", "辦理報到與退稅", "14:25 國際航班", "返回台灣"]
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            renderChecklist();
            renderTimeline();
            renderCostChart();
            document.getElementById('total-cost').textContent = new Intl.NumberFormat('zh-TW').format(TRIP_DATA.estimatedCost);
        });

        const checklistContainer = document.getElementById('checklist-container');

        function renderChecklist() {
            checklistContainer.innerHTML = CHECKLIST_STATE.map(item => `
                <div id="item-${item.id}" class="flex items-center p-3 rounded-lg cursor-pointer transition duration-150 ${item.completed ? 'bg-green-50' : 'bg-gray-100 hover:bg-gray-200'}" onclick="toggleChecklist(${item.id})">
                    <span class="text-xl mr-3 ${item.completed ? 'text-green-600' : 'text-gray-400'}">
                        ${item.completed ? '✔' : '☐'}
                    </span>
                    <p class="text-gray-700 font-medium ${item.completed ? 'line-through text-gray-500' : ''}">${item.text}</p>
                </div>
            `).join('');
        }

        function toggleChecklist(id) {
            const index = CHECKLIST_STATE.findIndex(item => item.id === id);
            if (index !== -1) {
                CHECKLIST_STATE[index].completed = !CHECKLIST_STATE[index].completed;
                renderChecklist();
            }
        }

        const timelineContainer = document.getElementById('timeline-container');

        function renderTimeline() {
            timelineContainer.innerHTML = ITINERARY_DATA.map(item => `
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <button class="flex items-center justify-between w-full p-4 pr-6 bg-white rounded-lg shadow-md hover:bg-indigo-50 transition duration-150 focus:outline-none" onclick="toggleDay(${item.day})">
                        <span class="text-lg font-bold ${(item.day === 5 || item.day === 6) ? 'text-amber-600' : 'text-indigo-700'}">${(item.day === 5 || item.day === 6) ? '🔥 ' : ''}Day ${item.day}: ${item.title}</span>
                        <span class="text-sm font-medium text-gray-500">${item.date} (${item.location})</span>
                        <span id="icon-${item.day}" class="text-xl text-indigo-500">▼</span>
                    </button>

                    <div id="details-${item.day}" class="p-4 mt-2 ml-5 bg-white rounded-lg border border-indigo-100 hidden">
                        <h4 class="text-md font-semibold text-gray-700 mb-2">🚌 交通：<span class="text-indigo-600 font-normal">${item.transport}</span></h4>
                        <p class="text-gray-600 mb-3">${item.details}</p>
                        <h4 class="text-md font-semibold text-gray-700 mb-1">📋 當日活動:</h4>
                        <ul class="list-disc list-inside text-gray-600 pl-4 space-y-1">
                            ${item.activities.map(act => `<li>${act}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `).join('');
        }

        function toggleDay(dayId) {
            const detailsElement = document.getElementById(`details-${dayId}`);
            const iconElement = document.getElementById(`icon-${dayId}`);

            if (detailsElement.classList.contains('hidden')) {
                document.querySelectorAll('[id^="details-"]').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('[id^="icon-"]').forEach(el => el.textContent = '▼');

                detailsElement.classList.remove('hidden');
                iconElement.textContent = '▲';
            } else {
                detailsElement.classList.add('hidden');
                iconElement.textContent = '▼';
            }
        }

        function renderCostChart() {
            const ctx = document.getElementById('costBreakdownChart').getContext('2d');
            const data = TRIP_DATA.costBreakdown;

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: data.map(d => d.label),
                    datasets: [{
                        data: data.map(d => d.amount),
                        backgroundColor: data.map(d => d.color),
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: { size: 13, family: 'Inter' }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed;
                                    const percentage = data[context.dataIndex].percentage.toFixed(2);
                                    return `${label}: NT$${new Intl.NumberFormat('zh-TW').format(value)} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
