<!-- Chosen Palette: Coastal Horizon (Main: White/Light Gray, Accent: Indigo-600, Secondary Accent: Amber-600) -->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ironman è¥¿ç­ç‰™ 12 æ—¥æ¢ç´¢å„€è¡¨æ¿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f7f7f7; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { max-width: 600px; height: 400px; }
        }
        .timeline-dot {
            position: absolute;
            left: -15px;
            top: 5px;
            width: 15px;
            height: 15px;
            background-color: #4f46e5;
            border-radius: 50%;
            border: 3px solid #f7f7f7;
        }
        .timeline-item { position: relative; padding-left: 20px; border-left: 2px solid #e0e0e0; margin-bottom: 20px; }
    </style>
</head>
<body class="antialiased text-gray-800">

    <!-- Header Navigation -->
    <header class="sticky top-0 z-50 bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-indigo-600">ğŸ‡ªğŸ‡¸ Ironman è¥¿ç­ç‰™ (12æ—¥è¡Œç¨‹)</h1>
            <nav class="space-x-4">
                <a href="#dashboard" class="text-gray-600 hover:text-indigo-600 transition duration-150 font-medium hidden sm:inline">å„€è¡¨æ¿</a>
                <a href="#itinerary" class="text-gray-600 hover:text-indigo-600 transition duration-150 font-medium">è¡Œç¨‹æ™‚é–“è»¸</a>
                <a href="#logistics" class="text-gray-600 hover:text-indigo-600 transition duration-150 font-medium hidden sm:inline">ç‰©æµ/è²»ç”¨</a>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- Dashboard Section -->
        <section id="dashboard" class="mb-12">
            <h2 class="text-3xl font-extrabold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">ğŸ¯ æ—…ç¨‹æ¦‚è¦½èˆ‡æº–å‚™è¡Œå‹•</h2>
            <p class="mb-8 text-gray-600">
                æœ¬å„€è¡¨æ¿åŒ¯é›†äº† **12 æ—¥**è¥¿ç­ç‰™ä¹‹æ—…çš„é—œéµæ•¸æ“šã€‚11/4 æŠµé”é¦¬å¾·é‡Œå¾Œç›´æ¥å‰å¾€æ‰˜é›·å¤šï¼Œé–‹å•Ÿç²¾å½©æ—…ç¨‹ï¼
            </p>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-10">
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-indigo-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">ç¸½æ—¥æ•¸</p>
                    <p id="stat-days" class="text-3xl font-bold text-indigo-800">12</p>
                </div>
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-indigo-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">åƒèˆ‡äººæ•¸</p>
                    <p id="stat-people" class="text-3xl font-bold text-indigo-800">8 ä½</p>
                </div>
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-amber-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">äº¤é€šå·¥å…·</p>
                    <p id="stat-transport" class="text-3xl font-bold text-amber-800">2 è¼›ç§Ÿè»Š</p>
                </div>
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-amber-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">æ¯”è³½åœ°é»</p>
                    <p id="stat-race" class="text-xl font-bold text-amber-800 mt-1">Marbella</p>
                </div>
            </div>

            <!-- Interactive Checklist -->
            <div class="p-6 bg-white rounded-xl shadow-2xl">
                <h3 class="text-xl font-bold text-indigo-600 mb-4">âœ… è¡Œå‰æº–å‚™æ¸…å–®</h3>
                <p class="text-sm text-gray-500 mb-4">é»æ“Šé …ç›®å³å¯è¿½è¹¤å®Œæˆç‹€æ…‹ã€‚</p>
                <div id="checklist-container" class="space-y-3">
                    <!-- Checklist items will be injected here by JS -->
                </div>
            </div>
        </section>

        <!-- Itinerary Section (Timeline) -->
        <section id="itinerary" class="mb-12 pt-10">
            <h2 class="text-3xl font-extrabold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">ğŸ“… 12 æ—¥è¡Œç¨‹æ™‚é–“è»¸ (é»æ“ŠæŸ¥çœ‹ç´°ç¯€)</h2>
            <p class="mb-8 text-gray-600">
                å¾æ‰˜é›·å¤šå¤åŸåˆ°é¦¬è²æ‹‰æµ·ç˜ï¼Œå¾æ ¼æ‹‰ç´é”çš„é˜¿çˆ¾ç½•å¸ƒæ‹‰å®®åˆ°å¡ç¶­äºçš„ä½›æœ—æ˜å“¥ï¼Œç²¾å½© 12 å¤©ç­‰ä½ æ¢ç´¢ï¼
            </p>

            <div id="timeline-container" class="relative">
                <!-- Timeline items will be injected here by JS -->
            </div>
        </section>

        <!-- Logistics & Cost Section -->
        <section id="logistics" class="pt-10">
            <h2 class="text-3xl font-extrabold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">ğŸ’° ç‰©æµèˆ‡è²»ç”¨åˆ†æ</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Logistics Summary Card -->
                <div class="p-6 bg-white rounded-xl shadow-2xl flex flex-col justify-center">
                    <h3 class="text-xl font-bold text-indigo-600 mb-3">ğŸš— æ ¸å¿ƒç‰©æµæ±ºç­–</h3>
                    <div class="space-y-4 text-gray-700">
                        <div class="p-3 bg-indigo-50 rounded-lg">
                            <p class="font-semibold text-indigo-800">äº¤é€šæ–¹æ¡ˆ (å·²ç¢ºèª)</p>
                            <p>ç§Ÿè³ƒ **2 è¼›è»Š**ï¼Œå…¨ç¨‹è‡ªé§•ã€‚æ¯å°ç§Ÿé‡‘ $8,600ï¼ˆ11/4-11/14å…¨åŒ…ï¼‰ï¼Œèˆ’é©å®¹ç´ 8 äººå’Œæ‰€æœ‰è¡Œæï¼Œè¡Œç¨‹å½ˆæ€§æœ€é«˜ã€‚</p>
                        </div>
                        <div class="p-3 bg-amber-50 rounded-lg">
                            <p class="font-semibold text-amber-800">è‡ªè¡Œè»Šè™•ç† (å·²ç¢ºèª)</p>
                            <p>Ironman é¸æ‰‹ï¼ˆé›…èã€çš“ä¸­å“¥ã€å…‰æ­¦ï¼‰çš„è‡ªè¡Œè»Šå°‡åœ¨é¦¬è²æ‹‰ **ç•¶åœ°ç§Ÿè³ƒ**ï¼Œå…å»é•·é€”é‹è¼¸çš„éº»ç…©ã€‚</p>
                        </div>
                        <div class="p-3 bg-indigo-50 rounded-lg">
                            <p class="font-semibold text-indigo-800">ä½å®¿ç¸½çµ</p>
                            <p>ä½å®¿å®‰æ’ä»¥å…¬å¯“å’Œç²¾å“é…’åº—ç‚ºä¸»ï¼Œç¸½è²»ç”¨ç´„ $144,699ã€‚é¦¬è²æ‹‰æœŸé–“å…‰æ­¦çˆ¸åª½å¦å¤–ä½å®¿ï¼Œé¦¬å¾·é‡Œåˆ†å…©è™•ä½å®¿ã€‚</p>
                        </div>
                    </div>
                </div>

                <!-- Cost Chart Container -->
                <div>
                    <h3 class="text-xl font-bold text-indigo-600 mb-4 text-center">ç¸½é ä¼°è²»ç”¨ (ç´„ NT$<span id="total-cost">596,599</span>) åˆ†ä½ˆ</h3>
                    <p class="text-sm text-center text-gray-500 mb-2">å–®ä½ï¼šæ–°å°å¹£ (TWD) | æ¯äººç´„ $74,575</p>
                    <div class="chart-container shadow-2xl rounded-xl bg-white p-4">
                        <canvas id="costBreakdownChart"></canvas>
                    </div>
                    <div class="mt-4 p-3 bg-amber-50 rounded-lg text-sm text-gray-600">
                        <p class="font-semibold text-amber-800 mb-2">ğŸ’¡ äº¤é€šè²»ç”¨æ˜ç´°ï¼ˆé ä¼°ï¼‰ï¼š</p>
                        <ul class="space-y-1 text-xs">
                            <li>â€¢ ç§Ÿè»Šå«ä¿éšªï¼š$17,200ï¼ˆ2å° Ã— $8,600ï¼‰</li>
                            <li>â€¢ æ²¹è²»ï¼š$15,700ï¼ˆç´„3,020kmï¼Œé ä¼°ï¼‰</li>
                            <li>â€¢ åœè»Šè²»ï¼š$3,500ï¼ˆå¸‚å€åœè»Šï¼Œé ä¼°ï¼‰</li>
                            <li>â€¢ éè·¯è²»ï¼š$1,500ï¼ˆé«˜é€Ÿå…¬è·¯ï¼Œé ä¼°ï¼‰</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="mt-12 py-6 bg-gray-100 text-center text-sm text-gray-500">
        <p>&copy; 2025 Ironman è¥¿ç­ç‰™åœ˜éšŠè¦åŠƒ | è³‡æ–™æ›´æ–°æ—¥æœŸï¼š2025/10/29</p>
    </footer>

    <script>
        const TRIP_DATA = {
            totalDays: 12,
            totalPeople: 8,
            raceLocation: "Marbella, Spain",
            estimatedCost: 596599,
            costBreakdown: [
                { label: "åœ‹éš›æ©Ÿç¥¨ (8äºº)", amount: 304000, percentage: 50.95, color: 'rgba(79, 70, 229, 0.8)' },
                { label: "ä½å®¿ (11æ™š)", amount: 144699, percentage: 24.25, color: 'rgba(234, 88, 12, 0.8)' },
                { label: "é¤è²»èˆ‡æ´»å‹•", amount: 110000, percentage: 18.44, color: 'rgba(251, 191, 36, 0.8)' },
                { label: "ç§Ÿè»Š/æ²¹è²»/åœè»Šè²» (é ä¼°)", amount: 37900, percentage: 6.35, color: 'rgba(129, 140, 248, 0.8)' }
            ]
        };

        let CHECKLIST_STATE = [
            { id: 1, text: "ç¢ºèªæ‰€æœ‰æˆå“¡è­·ç…§æ•ˆæœŸè¶…é 6 å€‹æœˆ", completed: false },
            { id: 2, text: "å®Œæˆ 2 è¼›ç§Ÿè»Šé è¨‚ (å«ä¿éšª)", completed: true },
            { id: 3, text: "ç¢ºèªæ‰€æœ‰é§•é§›åœ‹éš›é§•ç…§ (IDP) æ•ˆæœŸ", completed: false },
            { id: 4, text: "æ‰€æœ‰ä½å®¿é è¨‚ç¢ºèªèˆ‡ä»˜æ¬¾", completed: true },
            { id: 5, text: "Ironman è³½äº‹å ±åˆ°æ–‡ä»¶æº–å‚™ï¼ˆé›…èã€çš“ä¸­å“¥ã€å…‰æ­¦ï¼‰", completed: false },
            { id: 6, text: "ç¢ºèªç§Ÿè³ƒè‡ªè¡Œè»Šçš„å°ºå¯¸èˆ‡é ˜å–åœ°é»", completed: false },
            { id: 7, text: "è³¼è²·æ—…è¡Œ/æ„å¤–/é†«ç™‚ä¿éšª", completed: false },
            { id: 8, text: "é è¨‚é˜¿çˆ¾ç½•å¸ƒæ‹‰å®®é–€ç¥¨ï¼ˆéœ€æå‰ï¼‰", completed: false },
            { id: 9, text: "é è¨‚ä½›æœ—æ˜å“¥è¡¨æ¼”é–€ç¥¨", completed: false },
            { id: 10, text: "é è¨‚æ™®æ‹‰å¤šåšç‰©é¤¨ã€é¦¬å¾·é‡Œç‹å®®é–€ç¥¨ï¼ˆKlookï¼‰", completed: false },
        ];

        const ITINERARY_DATA = [
            { 
                day: 1, 
                date: "11/4 (äºŒ)", 
                location: "é¦¬å¾·é‡Œ â†’ æ‰˜é›·å¤š", 
                title: "é¦¬å¾·é‡Œ â†’ æ‰˜é›·å¤š", 
                transport: "12:40 æŠµé”é¦¬å¾·é‡Œï¼Œ14:30 é ˜å–ç§Ÿè»Šï¼Œè‡ªé§•è‡³æ‰˜é›·å¤š (1hr 15min)ã€‚", 
                details: "ä¸‹åˆæŠµé”é¦¬å¾·é‡Œæ©Ÿå ´å¾Œé ˜å– 2 è¼›ç§Ÿè»Šï¼Œç›´æ¥é©…è»Šå‰å¾€ä¸–ç•Œéºç”¢åŸå¸‚æ‰˜é›·å¤šã€‚æŠµé”å¾Œå…¥ä½é…’åº—ç¨ä½œä¼‘æ¯ï¼Œå‚æ™šå‰å¾€ Mirador del Valle æ¬£è³æ‰˜é›·å¤šå…¨æ™¯æ—¥è½ã€‚æ™šé¤å¾Œæ—©é»ä¼‘æ¯ï¼Œå¹«åŠ©èª¿æ•´æ™‚å·®ã€‚", 
                activities: ["12:40 æŠµé”é¦¬å¾·é‡Œ", "14:30 é ˜å–ç§Ÿè»Š", "15:30-16:00 æŠµé”æ‰˜é›·å¤šä¸¦ check-in", "16:00-17:00 å°ä¼‘/å¸‚å€é€›é€›", "18:00 Mirador del Valle çœ‹æ—¥è½", "20:15 æ™šé¤", "22:00 ä¼‘æ¯èª¿æ•´æ™‚å·®"]
            },
            { 
                day: 2, 
                date: "11/5 (ä¸‰)", 
                location: "æ‰˜é›·å¤š â†’ æ ¼æ‹‰ç´é”", 
                title: "æ‰˜é›·å¤š â†’ æ ¼æ‹‰ç´é”", 
                transport: "SUV è‡ªé§• (æ‰˜é›·å¤š-æ ¼æ‹‰ç´é”: 4hrï¼Œå«20-30åˆ†é˜ä¼‘æ¯)ã€‚", 
                details: "æ—©æ™¨æ™¨è·‘æˆ–æ•£æ­¥å¾Œäº«ç”¨æ—©é¤ã€‚ä¸Šåˆåƒè§€æ‰˜é›·å¤šä¸»æ•™å ‚ï¼Œé€™åº§å“¥å¾·å¼å»ºç¯‰æ˜¯è¥¿ç­ç‰™å¤©ä¸»æ•™çš„ç¸½æ•™å ‚ï¼Œä»¥å…¶è¯éº—çš„ç¥­å£‡å’Œè—è¡“æ”¶è—èåã€‚åˆé¤å¾Œå‡ºç™¼å‰å¾€æ ¼æ‹‰ç´é”ï¼Œé€™æ˜¯å‰å¾€é¦¬è²æ‹‰å‰æœ€é•·çš„é§•é§›è·¯æ®µï¼Œè«‹ç¢ºä¿é§•é§›è¼ªæ›¿èˆ‡ä¸­é€”ä¼‘æ¯ã€‚å‚æ™šæŠµé”æ ¼æ‹‰ç´é”å…¥ä½ã€‚", 
                activities: ["07:30 æ™¨è·‘/æ•£æ­¥", "08:30 æ—©é¤", "10:00 æ‰˜é›·å¤šä¸»æ•™å ‚", "12:00 åˆé¤", "13:30 å‡ºç™¼", "ä¸­é€”ä¼‘æ¯ 20-30 åˆ†é˜", "18:00 æŠµé”æ ¼æ‹‰ç´é”", "20:00 æ™šé¤"]
            },
            { 
                day: 3, 
                date: "11/6 (å››)", 
                location: "æ ¼æ‹‰ç´é” â†’ é¦¬è²æ‹‰", 
                title: "æ ¼æ‹‰ç´é” â†’ é¦¬è²æ‹‰", 
                transport: "SUV è‡ªé§• (æ ¼æ‹‰ç´é”-é¦¬è²æ‹‰: 2hr)ã€‚", 
                details: "æ¸…æ™¨ 8:00 å‰å¾€ä¸–ç•Œéºç”¢é˜¿çˆ¾ç½•å¸ƒæ‹‰å®®ï¼ˆå»ºè­°æå‰è³¼ç¥¨æˆ–ç¾å ´ç¢°é‹æ°£ï¼‰ã€‚é‡é»éŠè¦½ç´æ–¯é‡Œå¾·å®®çš„ç²¾ç·»ä¼Šæ–¯è˜­å»ºç¯‰ã€èµ«å…§æ‹‰åˆ©è²»å®®çš„ç¾éº—èŠ±åœ’ï¼Œé˜¿çˆ¾å¡è–©ç“¦è»äº‹è¦å¡å¯è¦–æ™‚é–“å½ˆæ€§åƒè§€ã€‚11:30 é›¢é–‹å®®æ®¿ï¼Œåœ¨å¸‚å€ç”¨é¤ï¼ˆå¯å¤–å¸¶ï¼‰å¾Œå‡ºç™¼å‰å¾€é¦¬è²æ‹‰ã€‚ä¸‹åˆæŠµé”å¾Œï¼ŒIronman é¸æ‰‹é€²è¡Œå ±åˆ°èˆ‡ EXPO åƒè§€ã€‚", 
                activities: ["8:00 é˜¿çˆ¾ç½•å¸ƒæ‹‰å®®ï¼ˆè³¼ç¥¨ç¢°é‹æ°£ï¼‰", "08:30-09:45 ç´æ–¯é‡Œå¾·å®®", "09:45-11:00 èµ«å…§æ‹‰åˆ©è²»å®®èˆ‡èŠ±åœ’", "11:00-11:30 å½ˆæ€§æ™‚é–“", "11:30 é›¢é–‹ï¼Œåˆé¤", "13:00 å‡ºç™¼å¾€é¦¬è²æ‹‰", "16:00-16:30 æŠµé”é¦¬è²æ‹‰ä¸¦ check-in", "17:00-18:00 é¸æ‰‹å ±åˆ° + EXPO"]
            },
            { 
                day: 4, 
                date: "11/7 (äº”)", 
                location: "é¦¬è²æ‹‰", 
                title: "é¦¬è²æ‹‰ï¼ˆè³½äº‹æº–å‚™ï¼‰", 
                transport: "å¸‚å€å…§ç§»å‹•ã€‚", 
                details: "å…¨å¤©è³½äº‹æº–å‚™ã€‚é¸æ‰‹ï¼ˆé›…èï¼‰é ˜å–ç§Ÿè³ƒè‡ªè¡Œè»Šã€åƒåŠ  EXPOã€é€²è¡Œæµ·åŸŸè©¦æ¸¸ã€ç†Ÿæ‚‰è³½é“ç’°å¢ƒã€‚å¥³å­çµ„é¸æ‰‹å®Œæˆè½‰æ›å€ Check-inã€‚éé¸æ‰‹å¯åœ¨æµ·ç˜ä¼‘é–’æˆ–æ¢ç´¢é¦¬è²æ‹‰èˆŠåŸå€ã€‚æ™šé¤æ¡é«˜ç¢³æ°´é£²é£Ÿï¼Œç‚ºæ˜æ—¥æ¯”è³½å„²å‚™èƒ½é‡ã€‚æ—©é»ä¼‘æ¯ç¢ºä¿å……è¶³ç¡çœ ã€‚", 
                activities: ["é ˜å–ç§Ÿè³ƒè‡ªè¡Œè»Šï¼ˆé›…èï¼‰", "EXPO åƒè§€", "æµ·åŸŸè©¦æ¸¸", "è³½é“å‹˜æŸ¥", "å¥³ç”Ÿè½‰æ›å€ Check-in", "é«˜ç¢³æ°´æ™šé¤", "æ—©é»ä¼‘æ¯"]
            },
            { 
                day: 5, 
                date: "11/8 (å…­)", 
                location: "é¦¬è²æ‹‰", 
                title: "âœ¨ é¦¬è²æ‹‰ï¼ˆå¥³å­çµ„è³½äº‹ï¼‰", 
                transport: "SUV å”åŠ©å¾Œå‹¤ã€‚", 
                details: "8:00 å¥³å­çµ„é–‹è³½ï¼é›…èæŒ‘æˆ°å…¨ç¨‹éµäººä¸‰é …ã€‚è¦ªå‹åœ˜åœ¨è½‰æ›å€ã€é—œéµè£œçµ¦é»èˆ‡çµ‚é»ç·šç‚ºé¸æ‰‹åŠ æ²¹æ‰“æ°£ã€‚åŒæ—¥ç”·å­çµ„é¸æ‰‹ï¼ˆçš“ä¸­å“¥ã€å…‰æ­¦ï¼‰é ˜å–è‡ªè¡Œè»Šä¸¦å®Œæˆè½‰æ›å€ Check-inï¼Œç‚ºæ˜æ—¥æ¯”è³½åšæº–å‚™ã€‚æ™šä¸Šç‚ºå¥³å­çµ„é¸æ‰‹æ…¶ç¥å®Œè³½ï¼Œç”·å­çµ„é¸æ‰‹æ—©é»ä¼‘æ¯é¤Šç²¾è“„éŠ³ã€‚", 
                activities: ["8:00 é›…èé–‹è³½ï¼ˆå¥³å­çµ„ï¼‰", "è¦ªå‹åœ˜é—œéµé»ä½åŠ æ²¹", "ç”·ç”Ÿé ˜å–è‡ªè¡Œè»Šï¼ˆçš“ä¸­å“¥ã€å…‰æ­¦ï¼‰", "ç”·ç”Ÿè½‰æ›å€ Check-in", "æ™šé¤æ…¶ç¥/æ—©ä¼‘æ¯"]
            },
            { 
                day: 6, 
                date: "11/9 (æ—¥)", 
                location: "é¦¬è²æ‹‰", 
                title: "ğŸ”¥ é¦¬è²æ‹‰ï¼ˆç”·å­çµ„è³½äº‹ï¼‰", 
                transport: "SUV å”åŠ©å¾Œå‹¤ã€‚", 
                details: "8:00 ç”·å­çµ„é–‹è³½ï¼çš“ä¸­å“¥èˆ‡å…‰æ­¦æŒ‘æˆ°å…¨ç¨‹éµäººä¸‰é …ï¼šæ¸¸æ³³ 3.8km â†’ è‡ªè¡Œè»Š 180km â†’ è·‘æ­¥ 42.2kmã€‚è¦ªå‹åœ˜åœ¨è½‰æ›å€ã€è‡ªè¡Œè»Šèˆ‡è·‘æ­¥è³½é“é—œéµé»ä½åŠ æ²¹æ‰“æ°£ï¼Œè¦‹è­‰é¸æ‰‹è·¨è¶Šçµ‚é»ç·šçš„æ¦®è€€æ™‚åˆ»ã€‚ä¸‹åˆç”·å­çµ„å®Œæˆè½‰æ›å€ Check-outã€‚æ™šä¸Šå…¨é«”æ…¶ç¥æ™šå®´ï¼Œç‚ºä¸‰ä½éµäººå–é‡‡ï¼", 
                activities: ["8:00 ç”·å­çµ„é–‹è³½ï¼ˆçš“ä¸­å“¥ã€å…‰æ­¦ï¼‰", "æ¸¸æ³³ (3.8km)", "è‡ªè¡Œè»Š (180km)", "è·‘æ­¥ (42.2km)", "çµ‚é»ç·šæ…¶ç¥", "ä¸‹åˆè½‰æ›å€ Check-out", "æ…¶ç¥æ™šå®´"]
            },
            { 
                day: 7, 
                date: "11/10 (ä¸€)", 
                location: "é¦¬è²æ‹‰ â†’ éš†é” â†’ å¡ç¶­äº", 
                title: "é¦¬è²æ‹‰ â†’ éš†é” â†’ å¡ç¶­äº", 
                transport: "SUV è‡ªé§• (é¦¬è²æ‹‰-éš†é”-å¡ç¶­äº: 3hr 5minï¼Œå«éš†é”åœç•™ 2hr)ã€‚", 
                details: "æ—©é¤å¾Œé€€æˆ¿ä¸¦æ­¸é‚„ç§Ÿè³ƒè‡ªè¡Œè»Šã€‚10:30 é©…è»Šå‰å¾€è‘—åæ‡¸å´–å°é®éš†é”ï¼Œ12:00 æŠµé”å¾Œåƒè§€æ©«è·¨ 120 å…¬å°ºæ·±å³½è°·çš„æ–°æ©‹ï¼ˆPuente Nuevoï¼‰èˆ‡è€åŸå€ï¼Œåœ¨éš†é”äº«ç”¨åˆé¤ä¸¦çŸ­æš«ä¼‘æ¯ç´„ 2 å°æ™‚ã€‚14:00 é›¢é–‹éš†é”ï¼Œå¯åœ¨ Zahara çŸ­æš«åœç•™ã€‚16:30 æŠµé”å¡ç¶­äºå…¥ä½ï¼Œæ™šé¤å¾Œå¯é¸æ“‡è§€è³ä½›æœ—æ˜å“¥è¡¨æ¼”ï¼ˆä¹Ÿå¯å®‰æ’åœ¨æ˜æ—¥ï¼‰ã€‚", 
                activities: ["8:00 æ—©é¤", "9:30 é€€æˆ¿ã€é‚„è‡ªè¡Œè»Š", "10:30 å‡ºç™¼", "12:00 æŠµé”éš†é”", "éš†é”æ–°æ©‹ & è€åŸï¼ˆç´„ 2hrï¼‰", "14:00 é›¢é–‹éš†é”", "16:30 æŠµé”å¡ç¶­äº", "20:00 æ™šé¤/ä½›æœ—æ˜å“¥ç§€ï¼ˆå¯é¸ï¼‰"]
            },
            { 
                day: 8, 
                date: "11/11 (äºŒ)", 
                location: "å¡ç¶­äº", 
                title: "å¡ç¶­äºï¼ˆæ·±åº¦éŠï¼‰", 
                transport: "å¸‚å€å…§ç§»å‹•ï¼ˆæ­¥è¡Œç‚ºä¸»ï¼‰ã€‚", 
                details: "å…¨å¤©æ¢ç´¢å®‰é”é­¯è¥¿äºé¦–åºœå¡ç¶­äºã€‚åƒè§€ä¸–ç•Œéºç”¢å¡ç¶­äºç‹å®®ï¼ˆAlcÃ¡zarï¼‰çš„ç²¾ç¾æ‘©çˆ¾å¼å»ºç¯‰èˆ‡åº­åœ’ï¼Œæ¥è‘—å‰å¾€å¡ç¶­äºå¤§æ•™å ‚ï¼ˆä¸–ç•Œç¬¬ä¸‰å¤§æ•™å ‚ï¼‰èˆ‡å¸Œæ‹‰é”å¡”ï¼ˆç™»å¡”å¯ä¿¯ç°å…¨åŸï¼‰ã€‚ä¸‹åˆå‰å¾€å£¯éº—çš„è¥¿ç­ç‰™å»£å ´æ‹ç…§ç•™å¿µï¼Œæ¼«æ­¥è–åå­—å€çš„ç™½è‰²å°å··èˆ‡æ©˜æ¨¹è¡—é“ã€‚æ™šä¸Šè§€è³æ­£å®—ä½›æœ—æ˜å“¥è¡¨æ¼”ï¼Œæ„Ÿå—å®‰é”é­¯è¥¿äºçš„ç†±æƒ…éˆé­‚ã€‚", 
                activities: ["æ°´é“æ©‹", "å¡ç¶­äºç‹å®®ï¼ˆAlcÃ¡zarï¼‰", "å¤§æ•™å ‚ + å¸Œæ‹‰é”å¡”", "è¥¿ç­ç‰™å»£å ´", "è–åå­—å€æ¼«æ­¥", "æ™šä¸Šä½›æœ—æ˜å“¥è¡¨æ¼”"]
            },
            { 
                day: 9, 
                date: "11/12 (ä¸‰)", 
                location: "å¡ç¶­äº â†’ æ¢…é‡Œé” â†’ å¡å¡é›·æ–¯", 
                title: "å¡ç¶­äº â†’ æ¢…é‡Œé” â†’ å¡å¡é›·æ–¯", 
                transport: "SUV è‡ªé§• (å¡ç¶­äº-å¡å¡é›·æ–¯: 2hrï¼Œå«æ¢…é‡Œé”åœç•™)ã€‚", 
                details: "ä¸Šåˆè£œé½Šå¡ç¶­äºéºç æ™¯é»æˆ–è³¼ç‰©ï¼ˆå¦‚éƒ½å¸‚é™½å‚˜ã€é»ƒé‡‘å¡”ç­‰ï¼‰ã€‚ä¸­åˆå‡ºç™¼ï¼Œé€”ç¶“æ¢…é‡Œé”ï¼ˆMÃ©ridaï¼‰é€™åº§å¤ç¾…é¦¬åŸå¸‚ï¼Œåƒè§€ä¿å­˜å®Œå¥½çš„ç¾…é¦¬åŠ‡é™¢èˆ‡ç«¶æŠ€å ´ï¼Œæ„Ÿå— 2000 å¹´å‰ç¾…é¦¬å¸åœ‹çš„è¼ç…Œã€‚ä¸‹åˆæŠµé”ä¸–ç•Œéºç”¢åŸå¸‚å¡å¡é›·æ–¯ï¼Œé€™åº§ä¸­ä¸–ç´€å¤åŸå®Œæ•´ä¿ç•™äº†æ–‡è—å¾©èˆˆæ™‚æœŸçš„å»ºç¯‰é¢¨è²Œã€‚å‚æ™šåœ¨è€åŸå€æ•£æ­¥ï¼Œäº«ç”¨ç•¶åœ°ç¾é£Ÿã€‚", 
                activities: ["ä¸Šåˆå¡ç¶­äºè³¼ç‰©/éºç æ™¯é»", "ä¸­åˆå‡ºç™¼", "æ¢…é‡Œé”ç¾…é¦¬åŠ‡é™¢èˆ‡ç«¶æŠ€å ´", "ä¸‹åˆæŠµé”å¡å¡é›·æ–¯", "å¡å¡é›·æ–¯è€åŸå€æ•£æ­¥", "æ™šé¤"]
            },
            { 
                day: 10, 
                date: "11/13 (å››)", 
                location: "å¡å¡é›·æ–¯ â†’ é¦¬å¾·é‡Œ", 
                title: "å¡å¡é›·æ–¯ â†’ ç‰¹é­¯å¸Œç•¥ â†’ Oropesa â†’ é¦¬å¾·é‡Œ", 
                transport: "SUV è‡ªé§• (å¡å¡é›·æ–¯-é¦¬å¾·é‡Œ: 3.5hr / 297kmï¼Œå«åœç•™)ã€‚", 
                details: "7:00 æ™¨è·‘ 30 åˆ†é˜å¾Œäº«ç”¨æ—©é¤ï¼Œ9:00 é›¢é–‹å¡å¡é›·æ–¯ã€‚09:45 æŠµé”ç‰¹é­¯å¸Œç•¥ï¼ˆå¾æœè€…çš®è–©ç¾…çš„æ•…é„‰ï¼‰ï¼Œåœ¨ä¸»å»£å ´ï¼ˆPlaza Mayorï¼‰å–å’–å•¡ä¸¦æ•£æ­¥ 40-60 åˆ†é˜ï¼Œæ¬£è³åŸå ¡é æ™¯ã€‚10:45 å‡ºç™¼å‰å¾€ä¸­ä¸–ç´€å°é® Oropesaï¼ˆç´„ 1.5 å°æ™‚ï¼‰ï¼Œ12:15 æŠµé”å¾Œåƒè§€ Castillo de Oropesa åŸå ¡ï¼Œ13:30 åœ¨åŸå ¡æ—çš„ Parador de Oropesa é¤å»³äº«ç”¨åˆé¤ã€‚15:00 å‡ºç™¼å‰å¾€é¦¬å¾·é‡Œï¼ˆç´„ 1.5 å°æ™‚ï¼‰ï¼Œ16:30-17:00 æŠµé”é¦¬å¾·é‡Œä½å®¿ä¸¦æ­¸é‚„ç§Ÿè»Šã€‚æ™šä¸Šåœ¨ Gran VÃ­a æˆ–éº—æ± å…¬åœ’è¼•é¬†æ•£æ­¥ã€‚", 
                activities: ["7:00 æ™¨è·‘ 30min", "8:00 æ—©é¤", "9:00 å‡ºç™¼", "09:45 æŠµé”ç‰¹é­¯å¸Œç•¥", "12:15 æŠµé” Oropesa", "13:30 åˆé¤", "15:00 å‡ºç™¼å¾€é¦¬å¾·é‡Œ", "16:30-17:00 æŠµé”é¦¬å¾·é‡Œã€é‚„è»Š", "20:00 æ™šé¤ + æ•£æ­¥"]
            },
            { 
                day: 11, 
                date: "11/14 (äº”)", 
                location: "é¦¬å¾·é‡Œ", 
                title: "é¦¬å¾·é‡Œï¼ˆå¸‚å€è§€å…‰ï¼‰", 
                transport: "å¸‚å€å…§ç§»å‹•ï¼ˆåœ°éµ/æ­¥è¡Œï¼‰ã€‚", 
                details: "å®Œæ•´ä¸€å¤©æ¢ç´¢è¥¿ç­ç‰™é¦–éƒ½é¦¬å¾·é‡Œã€‚ä¸Šåˆåƒè§€ä¸–ç•Œä¸‰å¤§ç¾è¡“é¤¨ä¹‹ä¸€çš„æ™®æ‹‰å¤šåšç‰©é¤¨ï¼ˆMuseo del Pradoï¼‰ï¼Œæ¬£è³ç¶­æ‹‰æ–¯å¥èŒ²ã€å“¥é›…ã€æ³¢å¸Œç­‰å¤§å¸«çš„ç¶“å…¸ä½œå“ã€‚ä¸‹åˆåƒè§€è¯éº—çš„é¦¬å¾·é‡Œç‹å®®ï¼ˆPalacio Realï¼‰ï¼Œé€™åº§æ­æ´²æœ€å¤§çš„ç‹å®®æ“æœ‰ 3000 å¤šå€‹æˆ¿é–“ï¼ˆå»ºè­°æå‰åœ¨ Klook è³¼ç¥¨ä»¥ç¯€çœæ™‚é–“ï¼‰ã€‚å‚æ™šåœ¨é¦¬ç´„çˆ¾å»£å ´ï¼ˆPlaza Mayorï¼‰ã€å¤ªé™½é–€å»£å ´ï¼ˆPuerta del Solï¼‰äº«å—è¥¿ç­ç‰™æœ€å¾Œä¸€æ™šçš„ç¾å¥½æ™‚å…‰ã€‚æ™šä¸Šåœ¨ Gran VÃ­a å¤§é“è³¼ç‰©æˆ–äº«ç”¨å‘Šåˆ¥æ™šé¤ã€‚", 
                activities: ["æ™®æ‹‰å¤šåšç‰©é¤¨", "é¦¬å¾·é‡Œç‹å®®", "é¦¬ç´„çˆ¾å»£å ´", "å¤ªé™½é–€å»£å ´", "Gran VÃ­a è³¼ç‰©", "å‘Šåˆ¥æ™šé¤"]
            },
            { 
                day: 12, 
                date: "11/15 (å…­)", 
                location: "é¦¬å¾·é‡Œ â†’ å°ç£", 
                title: "é¦¬å¾·é‡Œ â†’ å°ç£", 
                transport: "11:00 å‰å¾€é¦¬å¾·é‡Œæ©Ÿå ´ï¼Œ14:25 åœ‹éš›èˆªç­èµ·é£›ã€‚", 
                details: "ä¸Šåˆæ•´ç†è¡Œæï¼Œåœ¨ä½å®¿é™„è¿‘äº«ç”¨æœ€å¾Œçš„è¥¿ç­ç‰™æ—©é¤ï¼Œå“åš Churros é…å·§å…‹åŠ›æˆ–å’–å•¡ã€‚11:00 å‰æ­ä¹˜åœ°éµæˆ–è¨ˆç¨‹è»Šå‰å¾€é¦¬å¾·é‡Œå·´æ‹‰å“ˆæ–¯æ©Ÿå ´ï¼ˆAdolfo SuÃ¡rez Madrid-Barajas Airportï¼‰ï¼Œé ç•™å……è¶³æ™‚é–“è¾¦ç†å ±åˆ°èˆ‡é€€ç¨…æ‰‹çºŒã€‚14:25 æ­ä¹˜åœ‹éš›èˆªç­è¿”å›å°ç£ï¼Œå¸¶è‘—æ»¿æ»¿çš„å›æ†¶ã€Ironman å®Œè³½çš„æ¦®è€€èˆ‡è¥¿ç­ç‰™çš„ç†±æƒ…ï¼Œè¸ä¸Šæ­¸é€”ã€‚Â¡Hasta luego, EspaÃ±a!", 
                activities: ["æ•´ç†è¡Œæ", "æœ€å¾Œçš„è¥¿ç­ç‰™æ—©é¤", "11:00 å‰å¾€æ©Ÿå ´", "è¾¦ç†å ±åˆ°èˆ‡é€€ç¨…", "14:25 åœ‹éš›èˆªç­", "è¿”å›å°ç£"]
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            renderChecklist();
            renderTimeline();
            renderCostChart();
            document.getElementById('total-cost').textContent = new Intl.NumberFormat('zh-TW').format(TRIP_DATA.estimatedCost);
        });

        const checklistContainer = document.getElementById('checklist-container');

        function renderChecklist() {
            checklistContainer.innerHTML = CHECKLIST_STATE.map(item => `
                <div id="item-${item.id}" class="flex items-center p-3 rounded-lg cursor-pointer transition duration-150 ${item.completed ? 'bg-green-50' : 'bg-gray-100 hover:bg-gray-200'}" onclick="toggleChecklist(${item.id})">
                    <span class="text-xl mr-3 ${item.completed ? 'text-green-600' : 'text-gray-400'}">
                        ${item.completed ? 'âœ”' : 'â˜'}
                    </span>
                    <p class="text-gray-700 font-medium ${item.completed ? 'line-through text-gray-500' : ''}">${item.text}</p>
                </div>
            `).join('');
        }

        function toggleChecklist(id) {
            const index = CHECKLIST_STATE.findIndex(item => item.id === id);
            if (index !== -1) {
                CHECKLIST_STATE[index].completed = !CHECKLIST_STATE[index].completed;
                renderChecklist();
            }
        }

        const timelineContainer = document.getElementById('timeline-container');

        function renderTimeline() {
            timelineContainer.innerHTML = ITINERARY_DATA.map(item => `
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <button class="flex items-center justify-between w-full p-4 pr-6 bg-white rounded-lg shadow-md hover:bg-indigo-50 transition duration-150 focus:outline-none" onclick="toggleDay(${item.day})">
                        <span class="text-lg font-bold ${(item.day === 5 || item.day === 6) ? 'text-amber-600' : 'text-indigo-700'}">${(item.day === 5 || item.day === 6) ? 'ğŸ”¥ ' : ''}Day ${item.day}: ${item.title}</span>
                        <span class="text-sm font-medium text-gray-500">${item.date} (${item.location})</span>
                        <span id="icon-${item.day}" class="text-xl text-indigo-500">â–¼</span>
                    </button>

                    <div id="details-${item.day}" class="p-4 mt-2 ml-5 bg-white rounded-lg border border-indigo-100 hidden">
                        <h4 class="text-md font-semibold text-gray-700 mb-2">ğŸšŒ äº¤é€šï¼š<span class="text-indigo-600 font-normal">${item.transport}</span></h4>
                        <p class="text-gray-600 mb-3">${item.details}</p>
                        <h4 class="text-md font-semibold text-gray-700 mb-1">ğŸ“‹ ç•¶æ—¥æ´»å‹•:</h4>
                        <ul class="list-disc list-inside text-gray-600 pl-4 space-y-1">
                            ${item.activities.map(act => `<li>${act}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `).join('');
        }

        function toggleDay(dayId) {
            const detailsElement = document.getElementById(`details-${dayId}`);
            const iconElement = document.getElementById(`icon-${dayId}`);

            if (detailsElement.classList.contains('hidden')) {
                document.querySelectorAll('[id^="details-"]').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('[id^="icon-"]').forEach(el => el.textContent = 'â–¼');

                detailsElement.classList.remove('hidden');
                iconElement.textContent = 'â–²';
            } else {
                detailsElement.classList.add('hidden');
                iconElement.textContent = 'â–¼';
            }
        }

        function renderCostChart() {
            const ctx = document.getElementById('costBreakdownChart').getContext('2d');
            const data = TRIP_DATA.costBreakdown;

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: data.map(d => d.label),
                    datasets: [{
                        data: data.map(d => d.amount),
                        backgroundColor: data.map(d => d.color),
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: { size: 13, family: 'Inter' }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed;
                                    const percentage = data[context.dataIndex].percentage.toFixed(2);
                                    return `${label}: NT$${new Intl.NumberFormat('zh-TW').format(value)} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
