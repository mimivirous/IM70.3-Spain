<!-- Chosen Palette: Coastal Horizon (Main: White/Light Gray, Accent: Indigo-600, Secondary Accent: Amber-600) -->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ironman è¥¿ç­ç‰™ 12 æ—¥æ¢ç´¢å„€è¡¨æ¿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f7f7f7; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { max-width: 600px; height: 400px; }
        }
        .timeline-dot {
            position: absolute;
            left: -15px;
            top: 5px;
            width: 15px;
            height: 15px;
            background-color: #4f46e5; /* Indigo-600 */
            border-radius: 50%;
            border: 3px solid #f7f7f7;
        }
        .timeline-item { position: relative; padding-left: 20px; border-left: 2px solid #e0e0e0; margin-bottom: 20px; }
    </style>
</head>
<body class="antialiased text-gray-800">

    <!-- Header Navigation -->
    <header class="sticky top-0 z-50 bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-indigo-600">ğŸ‡ªğŸ‡¸ Ironman è¥¿ç­ç‰™ (12æ—¥è¡Œç¨‹)</h1>
            <nav class="space-x-4">
                <a href="#dashboard" class="text-gray-600 hover:text-indigo-600 transition duration-150 font-medium hidden sm:inline">å„€è¡¨æ¿</a>
                <a href="#itinerary" class="text-gray-600 hover:text-indigo-600 transition duration-150 font-medium">è¡Œç¨‹æ™‚é–“è»¸</a>
                <a href="#logistics" class="text-gray-600 hover:text-indigo-600 transition duration-150 font-medium hidden sm:inline">ç‰©æµ/è²»ç”¨</a>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <!-- Dashboard Section -->
        <section id="dashboard" class="mb-12">
            <h2 class="text-3xl font-extrabold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">ğŸ¯ æ—…ç¨‹æ¦‚è¦½èˆ‡æº–å‚™è¡Œå‹•</h2>
            <p class="mb-8 text-gray-600">
                æœ¬å„€è¡¨æ¿åŒ¯é›†äº† **12 æ—¥**è¥¿ç­ç‰™ä¹‹æ—…çš„é—œéµæ•¸æ“šã€‚è¡Œç¨‹å·²å£“ç¸®ï¼ŒDay 1 æŠµé”å¾Œå°‡ç›´æ¥è½‰å¾€æ‰˜èŠå¤šä½å®¿ã€‚
            </p>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-10">
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-indigo-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">ç¸½æ—¥æ•¸</p>
                    <p id="stat-days" class="text-3xl font-bold text-indigo-800">12</p>
                </div>
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-indigo-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">åƒèˆ‡äººæ•¸</p>
                    <p id="stat-people" class="text-3xl font-bold text-indigo-800">8 ä½</p>
                </div>
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-amber-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">äº¤é€šå·¥å…·</p>
                    <p id="stat-transport" class="text-3xl font-bold text-amber-800">2 è¼› SUV</p>
                </div>
                <div class="p-5 bg-white rounded-xl shadow-lg border-b-4 border-amber-500 transform hover:scale-[1.02] transition duration-200">
                    <p class="text-sm font-medium text-gray-500">æ¯”è³½åœ°é»</p>
                    <p id="stat-race" class="text-xl font-bold text-amber-800 mt-1">Marbella</p>
                </div>
            </div>

            <!-- Interactive Checklist -->
            <div class="p-6 bg-white rounded-xl shadow-2xl">
                <h3 class="text-xl font-bold text-indigo-600 mb-4">âœ… è¡Œå‰æº–å‚™æ¸…å–® (8/1-8/13)</h3>
                <p class="text-sm text-gray-500 mb-4">é»æ“Šé …ç›®å³å¯è¿½è¹¤å®Œæˆç‹€æ…‹ã€‚</p>
                <div id="checklist-container" class="space-y-3">
                    <!-- Checklist items will be injected here by JS -->
                </div>
            </div>
        </section>

        <!-- Itinerary Section (Timeline) -->
        <section id="itinerary" class="mb-12 pt-10">
            <h2 class="text-3xl font-extrabold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">ğŸ“… 12 æ—¥è¡Œç¨‹æ™‚é–“è»¸ (é»æ“ŠæŸ¥çœ‹ç´°ç¯€)</h2>
            <p class="mb-8 text-gray-600">
                è¡Œç¨‹å·²æ›´æ–°ç‚º 12 å¤©ï¼Œé¦–æ—¥æŠµé”å¾Œå³å‰å¾€æ‰˜èŠå¤šå…¥ä½ã€‚
            </p>

            <div id="timeline-container" class="relative">
                <!-- Timeline items will be injected here by JS -->
            </div>
        </section>

        <!-- Logistics & Cost Section -->
        <section id="logistics" class="pt-10">
            <h2 class="text-3xl font-extrabold text-indigo-700 mb-6 border-b-2 border-indigo-200 pb-2">ğŸ’° ç‰©æµèˆ‡è²»ç”¨åˆ†æ</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Logistics Summary Card -->
                <div class="p-6 bg-white rounded-xl shadow-2xl flex flex-col justify-center">
                    <h3 class="text-xl font-bold text-indigo-600 mb-3">ğŸš— æ ¸å¿ƒç‰©æµæ±ºç­–</h3>
                    <div class="space-y-4 text-gray-700">
                        <div class="p-3 bg-indigo-50 rounded-lg">
                            <p class="font-semibold text-indigo-800">äº¤é€šæ–¹æ¡ˆ (å·²ç¢ºèª)</p>
                            <p>ç¢ºå®šç§Ÿè³ƒ **2 è¼›ä¸­å¤§å‹ SUV**ï¼Œä»¥èˆ’é©å®¹ç´ 8 äººå’Œæ‰€æœ‰è¡Œæã€‚å…¨ç¨‹è‡ªé§•ï¼Œè¡Œç¨‹å½ˆæ€§æœ€é«˜ã€‚</p>
                        </div>
                        <div class="p-3 bg-amber-50 rounded-lg">
                            <p class="font-semibold text-amber-800">è‡ªè¡Œè»Šè™•ç† (å·²ç¢ºèª)</p>
                            <p>æ‰€æœ‰ Ironman é¸æ‰‹çš„è‡ªè¡Œè»Šå°‡åœ¨é¦¬è²æ‹‰ **ç•¶åœ°ç§Ÿè³ƒ**ï¼Œå…å»é•·é€”é£›è¡Œå’Œé‹è¼¸çš„éº»ç…©ã€‚</p>
                        </div>
                        <div class="p-3 bg-indigo-50 rounded-lg">
                            <p class="font-semibold text-semibold text-indigo-800">ä½å®¿ç¸½çµ</p>
                            <p>ä½å®¿å®‰æ’çš†ä»¥å®¶åº­å¼å…¬å¯“ç‚ºä¸»ï¼Œç¢ºä¿åœ˜å“¡èƒ½æœ‰å…¬å…±ç©ºé–“é€²è¡Œè³½å‰æº–å‚™å’Œæ”¾é¬†ã€‚</p>
                        </div>
                    </div>
                </div>

                <!-- Cost Chart Container -->
                <div>
                    <h3 class="text-xl font-bold text-indigo-600 mb-4 text-center">ç¸½é ä¼°è²»ç”¨ (ç´„ â‚¬<span id="total-cost">65,000</span>) åˆ†ä½ˆ</h3>
                    <p class="text-sm text-center text-gray-500 mb-2">å–®ä½ï¼šæ­å…ƒ (EUR)</p>
                    <div class="chart-container shadow-2xl rounded-xl bg-white p-4">
                        <canvas id="costBreakdownChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="mt-12 py-6 bg-gray-100 text-center text-sm text-gray-500">
        <p>&copy; 2025 Ironman è¥¿ç­ç‰™åœ˜éšŠè¦åŠƒ | è³‡æ–™æ›´æ–°æ—¥æœŸï¼š2025/08/01</p>
    </footer>

    <script>
        const TRIP_DATA = {
            totalDays: 12,
            totalPeople: 8,
            raceLocation: "Marbella, Spain",
            estimatedCost: 65000,
            costBreakdown: [
                { label: "åœ‹éš›æ©Ÿç¥¨ (8äºº)", amount: 32000, percentage: 49.23, color: 'rgba(79, 70, 229, 0.8)' },
                { label: "ä½å®¿ (11æ™š)", amount: 14000, percentage: 21.54, color: 'rgba(234, 88, 12, 0.8)' }, // Adjusted cost for 1 fewer night
                { label: "ç§Ÿè»Š/æ²¹è²» (2 SUV)", amount: 8000, percentage: 12.31, color: 'rgba(129, 140, 248, 0.8)' },
                { label: "è³½äº‹å ±åè²»", amount: 6500, percentage: 10.00, color: 'rgba(251, 191, 36, 0.8)' },
                { label: "å…¶ä»–è²»ç”¨ (ç§Ÿè»Š/ä¿éšªç­‰)", amount: 4500, percentage: 6.92, color: 'rgba(209, 213, 219, 0.8)' } // Re-allocated difference
            ]
        };

        let CHECKLIST_STATE = [
            { id: 1, text: "ç¢ºèªæ‰€æœ‰æˆå“¡è­·ç…§æ•ˆæœŸè¶…é 6 å€‹æœˆ", completed: false },
            { id: 2, text: "å®Œæˆ 2 è¼› SUV ç§Ÿè»Šé è¨‚ (å«ä¿éšª)", completed: true },
            { id: 3, text: "ç¢ºèªæ‰€æœ‰é§•é§›åœ‹éš›é§•ç…§ (IDP) æ•ˆæœŸ", completed: false },
            { id: 4, text: "æ‰€æœ‰æˆå“¡è¥¿ç­ç‰™ç°½è­‰/æ—…è¡Œæˆæ¬Šæº–å‚™", completed: false },
            { id: 5, text: "Ironman è³½äº‹å ±åˆ°æ–‡ä»¶æº–å‚™", completed: false },
            { id: 6, text: "ç¢ºèªç§Ÿè³ƒè…³è¸è»Šçš„å°ºå¯¸èˆ‡é ˜å–åœ°é»", completed: false },
            { id: 7, text: "è³¼è²·æ—…è¡Œ/æ„å¤–/é†«ç™‚ä¿éšª", completed: true },
        ];

        // UPDATED ITINERARY DATA: Day 1 is now Toledo, Day 2 is long drive to Granada.
        const ITINERARY_DATA = [
            // NEW DAY 1: Arrive MAD, Drive to Toledo, Overnight in Toledo
            { day: 1, date: "11/03 (ä¸€)", location: "æ‰˜èŠå¤š (Toledo)", title: "æŠµé”ã€ç§Ÿè»Šèˆ‡å¤éƒ½å·¡ç¦®", transport: "MAD æ©Ÿå ´é ˜å– 2 è¼› SUVï¼Œè‡ªé§•è‡³æ‰˜èŠå¤š (1hr)ã€‚", details: "ä¸Šåˆï¼šåœ‹éš›èˆªç­æŠµé”é¦¬å¾·é‡Œ (MAD)ï¼Œé ˜å–ç§Ÿè»Šã€‚ä¸‹åˆï¼šç›´æ¥é©…è»Šå‰å¾€æ‰˜èŠå¤šä¸¦å…¥ä½ã€‚å‚æ™šåœ¨æ‰˜èŠå¤šå¤åŸå€è¼•é¬†æ¼«æ­¥ï¼Œé©æ‡‰æ™‚å·®ï¼Œä¸¦æ¬£è³å¤åŸå¤œæ™¯ã€‚", activities: ["åœ‹éš›é•·é€”é£›è¡Œ", "é ˜å– 2 è¼› SUV", "å…¥ä½æ‰˜èŠå¤šå…¬å¯“", "æ‰˜èŠå¤šå¤åŸå€æ¼«æ­¥"] },
            // NEW DAY 2: Long Transfer to Granada
            { day: 2, date: "11/04 (äºŒ)", location: "æ ¼æ‹‰ç´é” (Granada)", title: "è½‰æˆ°æ ¼æ‹‰ç´é” (é•·é€”è½‰å ´æ—¥)", transport: "SUV è‡ªé§• (æ‰˜èŠå¤š-æ ¼æ‹‰ç´é”: 4.5hr)ã€‚", details: "æ—©é¤å¾Œï¼Œé€²è¡Œé•·é€”é§•é§›å‰å¾€æ ¼æ‹‰ç´é”ã€‚é€™æ˜¯å‰å¾€é¦¬è²æ‹‰å‰æœ€é•·çš„é§•é§›è·¯æ®µï¼Œè«‹ç¢ºä¿é§•é§›è¼ªæ›¿èˆ‡è¶³å¤ çš„ä¸­é€”ä¼‘æ¯ã€‚å‚æ™šæŠµé”ä¸¦å…¥ä½ã€‚", activities: ["é•·é€”é§•é§› (ä¸­åœä¼‘æ¯)", "å…¥ä½æ ¼æ‹‰ç´é”å…¬å¯“", "æ™šé¤èˆ‡ä¼‘æ¯"] },
            // NEW DAY 3 (Original Day 4)
            { day: 3, date: "11/05 (ä¸‰)", location: "æ ¼æ‹‰ç´é”", title: "é˜¿çˆ¾ç½•å¸ƒæ‹‰å®®èˆ‡åŸå¸‚æ¢ç´¢", transport: "å¸‚å€å…§ç§»å‹•ã€‚", details: "ä¸Šåˆï¼šåƒè§€ä¸–ç•Œéºç”¢é˜¿çˆ¾ç½•å¸ƒæ‹‰å®® (Alhambra Palace)ï¼Œéœ€æå‰é è¨‚é–€ç¥¨ã€‚ä¸‹åˆï¼šåœ¨é˜¿çˆ¾æ‹œè¾›å€ (AlbaicÃ­n) æ¬£è³å®®æ®¿ç¾æ™¯ã€‚é¸æ‰‹é€²è¡Œè¼•åº¦è¨“ç·´ã€‚", activities: ["é˜¿çˆ¾ç½•å¸ƒæ‹‰å®® (Alhambra)", "é˜¿çˆ¾æ‹œè¾›å€æ•£æ­¥", "å¡”å¸•æ–¯æ™šé¤"] },
            // NEW DAY 4 (Original Day 5)
            { day: 4, date: "11/06 (å››)", location: "é¦¬è²æ‹‰ (Marbella)", title: "è½‰æˆ°é¦¬è²æ‹‰ & è³½äº‹æº–å‚™", transport: "SUV è‡ªé§• (æ ¼æ‹‰ç´é”-é¦¬è²æ‹‰: 2hr)ã€‚", details: "ä¸Šåˆï¼šé©…è»Šå‰å¾€é¦¬è²æ‹‰ã€‚ä¸‹åˆï¼šIronman é¸æ‰‹é€²è¡Œå ±åˆ°ã€é ˜å–ç‰©è³‡åŠç§Ÿè³ƒè‡ªè¡Œè»Šã€‚éé¸æ‰‹é€²è¡Œæµ·ç˜ä¼‘é–’ã€‚æ™šä¸Šï¼šæº–å‚™é€±æœ«çš„æ¯”è³½ã€‚", activities: ["çŸ­é€”é§•é§›", "Ironman é¸æ‰‹å ±åˆ°", "é ˜å–ç§Ÿè³ƒè‡ªè¡Œè»Š", "æµ·ç˜æ”¾é¬†"] },
            // NEW DAY 5 (Original Day 6)
            { day: 5, date: "11/07 (äº”)", location: "é¦¬è²æ‹‰", title: "è³½é“å‹˜æŸ¥èˆ‡è£å‚™æª¢æŸ¥", transport: "SUV å”åŠ©é‹é€è£å‚™ã€‚", details: "ä¸Šåˆï¼šé€²è¡Œæ¸¸æ³³è³½é“å’Œè‡ªè¡Œè»Šè³½é“çš„æœ€å¾Œå‹˜æŸ¥ã€‚ä¸­åˆï¼šæ‰€æœ‰åƒè³½è£å‚™æ”¾ç½®æ–¼è½‰æ›å€ã€‚ä¸‹åˆï¼šæŠ€è¡“æœƒè­°èˆ‡æ¯”è³½è¦å‰‡å†ç¢ºèªã€‚æ—©æ™šé¤é«˜ç¢³æ°´é£²é£Ÿã€‚", activities: ["è³½é“å‹˜æŸ¥", "è½‰æ›å€æ”¾è»Š/è£å‚™", "æŠ€è¡“æœƒè­°", "é«˜ç¢³æ°´æ™šé¤"] },
            // NEW DAY 6 (Original Day 7 - Race Day shifted to 11/08)
            { day: 6, date: "11/08 (å…­)", location: "é¦¬è²æ‹‰", title: "âœ¨ Ironman ä¸–ç•ŒéŒ¦æ¨™è³½æ—¥ï¼", transport: "SUV å”åŠ©å¾Œå‹¤ã€‚", details: "å…¨å¤©ï¼šåƒè³½è€…æŠ•å…¥æ¯”è³½ã€‚è¦ªå‹åœ˜ï¼šåœ¨è½‰æ›å€ã€çµ‚é»ç·šé€²è¡Œé—œéµè£œçµ¦èˆ‡åŠ æ²¹ã€‚æ™šä¸Šï¼šæ…¶ç¥æ™šå®´æˆ–æ”¾é¬†ä¼‘æ¯ã€‚", activities: ["æ¸¸æ³³ (3.8k)", "è‡ªè¡Œè»Š (180k)", "è·‘æ­¥ (42.2k)", "çµ‚é»ç·šæ…¶ç¥"] },
            // NEW DAY 7 (Original Day 8)
            { day: 7, date: "11/09 (æ—¥)", location: "é¦¬è²æ‹‰", title: "è³½å¾Œæ¢å¾©èˆ‡åŸå¸‚æ¼«æ­¥", transport: "å¸‚å€å…§ç§»å‹•ã€‚", details: "ä¸Šåˆï¼šé¸æ‰‹é ˜å›è£å‚™èˆ‡è‡ªè¡Œè»Šï¼ˆæ­¸é‚„ç§Ÿè³ƒè»Šè¼›ï¼‰ã€‚ä¸‹åˆï¼šåœ¨é¦¬è²æ‹‰èˆŠåŸå€äº«å—æ‚ é–’æ™‚å…‰ï¼Œå“åšåœ°ä¸­æµ·ç¾é£Ÿï¼Œé€²è¡Œè¼•åº¦æ¢å¾©æ´»å‹•ã€‚", activities: ["é ˜å–è£å‚™/æ­¸é‚„ç§Ÿè³ƒè‡ªè¡Œè»Š", "èˆŠåŸå€æ¢ç´¢", "è³½å¾ŒæŒ‰æ‘©/æ¢å¾©"] },
            // NEW DAY 8 (Original Day 9)
            { day: 8, date: "11/10 (ä¸€)", location: "å¡ç¶­åˆ©äº (Seville)", title: "è½‰æˆ°å¡ç¶­åˆ©äº", transport: "SUV è‡ªé§• (é¦¬è²æ‹‰-å¡ç¶­åˆ©äº: 2.5hr)ã€‚", details: "ä¸Šåˆï¼šå¾é¦¬è²æ‹‰å‡ºç™¼ï¼Œå‰å¾€å®‰é”é­¯è¥¿äºé¦–åºœâ€”å¡ç¶­åˆ©äºã€‚ä¸‹åˆï¼šå…¥ä½å…¬å¯“å¾Œï¼Œé€²è¡Œè¼•é¬†çš„åŸå¸‚æ¼«æ­¥ï¼Œé¿å…éåº¦å‹ç´¯ã€‚", activities: ["çŸ­é€”é§•é§›", "å…¥ä½å¡ç¶­åˆ©äºå…¬å¯“", "æ²³ç•”æ•£æ­¥"] },
            // NEW DAY 9 (Original Day 10)
            { day: 9, date: "11/11 (äºŒ)", location: "å¡ç¶­åˆ©äº", title: "ä½›æœ—æ˜å“¥èˆ‡è¥¿ç­ç‰™å»£å ´", transport: "å¸‚å€å…§ç§»å‹•ã€‚", details: "ä¸Šåˆï¼šåƒè§€å¡ç¶­åˆ©äºå¤§æ•™å ‚èˆ‡ç‹å®® (AlcÃ¡zar)ã€‚ä¸‹åˆï¼šåœ¨å£¯è§€çš„è¥¿ç­ç‰™å»£å ´æ‹ç…§ç•™å¿µã€‚æ™šä¸Šï¼šé è¨‚ä½›æœ—æ˜å“¥èˆè¹ˆè¡¨æ¼”ã€‚", activities: ["å¡ç¶­åˆ©äºç‹å®®", "è¥¿ç­ç‰™å»£å ´", "ä½›æœ—æ˜å“¥è¡¨æ¼”"] },
            // NEW DAY 10 (Original Day 11)
            { day: 10, date: "11/12 (ä¸‰)", location: "ç§‘çˆ¾å¤šç“¦ (CÃ³rdoba)", title: "ç§‘çˆ¾å¤šç“¦ï¼šæ¸…çœŸå¯ºèˆ‡èŠ±å··", transport: "SUV è‡ªé§• (å¡ç¶­åˆ©äº-ç§‘çˆ¾å¤šç“¦: 1.5hr)ã€‚", details: "ä¸Šåˆï¼šå‰å¾€ç§‘çˆ¾å¤šç“¦ã€‚ä¸‹åˆï¼šåƒè§€æ¸…çœŸå¯ºå¤§æ•™å ‚ (Mezquita-Cathedral)ã€‚æ¢ç´¢è‘—åçš„ç™¾èŠ±å·· (Calleja de las Flores)ã€‚", activities: ["æ¸…çœŸå¯ºå¤§æ•™å ‚", "ç™¾èŠ±å··æ¢ç´¢", "ç¾…é¦¬æ©‹æ—¥è½"] },
            // NEW DAY 11 (Original Day 12)
            { day: 11, date: "11/13 (å››)", location: "é¦¬å¾·é‡Œ", title: "è¿”å›é¦¬å¾·é‡Œèˆ‡è³¼ç‰©", transport: "SUV è‡ªé§• (ç§‘çˆ¾å¤šç“¦-é¦¬å¾·é‡Œ: 4hr)ã€‚", details: "ä¸Šåˆï¼šå•Ÿç¨‹è¿”å›é¦¬å¾·é‡Œã€‚ä¸‹åˆï¼šæŠµé”å¾Œé€²è¡Œæœ€å¾Œçš„è³¼ç‰©æ´»å‹•ï¼ˆä¾‹å¦‚å¤ªé™½é–€å»£å ´æˆ–è‹±åœ‹å®®ç™¾è²¨ï¼‰ã€‚æ™šä¸Šï¼šäº«ç”¨å‘Šåˆ¥æ™šé¤ã€‚", activities: ["é•·é€”é§•é§›", "æœ€å¾Œè³¼ç‰©", "å‘Šåˆ¥æ™šé¤"] },
            // NEW DAY 12 (Original Day 13)
            { day: 12, date: "11/14 (äº”)", location: "é¦¬å¾·é‡Œ (MAD)", title: "å•Ÿç¨‹å›åœ‹", transport: "SUV é–‹å¾€ MAD æ©Ÿå ´ã€‚", details: "ä¸Šåˆï¼šæœ€å¾Œæ•´ç†è¡Œæã€‚å‰å¾€é¦¬å¾·é‡Œæ©Ÿå ´ (MAD) æ­¸é‚„ç§Ÿè³ƒè»Šè¼›ã€‚æ­ä¹˜åœ‹éš›èˆªç­è¿”å›å°ç£ã€‚", activities: ["æ­¸é‚„ SUV", "æ©Ÿå ´å ±åˆ°", "åœ‹éš›èˆªç­"] }
        ];

        // --- Core JavaScript Logic (Unchanged from previous versions) ---

        document.addEventListener('DOMContentLoaded', () => {
            renderChecklist();
            renderTimeline();
            renderCostChart();
            document.getElementById('total-cost').textContent = new Intl.NumberFormat('en-US').format(TRIP_DATA.estimatedCost);
        });

        // 1. Checklist Rendering and Interaction
        const checklistContainer = document.getElementById('checklist-container');

        function renderChecklist() {
            checklistContainer.innerHTML = CHECKLIST_STATE.map(item => `
                <div id="item-${item.id}" class="flex items-center p-3 rounded-lg cursor-pointer transition duration-150 ${item.completed ? 'bg-green-50' : 'bg-gray-100 hover:bg-gray-200'}" onclick="toggleChecklist(${item.id})">
                    <span class="text-xl mr-3 ${item.completed ? 'text-green-600' : 'text-gray-400'}">
                        ${item.completed ? 'âœ”' : 'â˜'}
                    </span>
                    <p class="text-gray-700 font-medium ${item.completed ? 'line-through text-gray-500' : ''}">${item.text}</p>
                </div>
            `).join('');
        }

        function toggleChecklist(id) {
            const index = CHECKLIST_STATE.findIndex(item => item.id === id);
            if (index !== -1) {
                CHECKLIST_STATE[index].completed = !CHECKLIST_STATE[index].completed;
                renderChecklist();
            }
        }

        // 2. Timeline Rendering and Interaction
        const timelineContainer = document.getElementById('timeline-container');

        function renderTimeline() {
            timelineContainer.innerHTML = ITINERARY_DATA.map(item => `
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <button class="flex items-center justify-between w-full p-4 pr-6 bg-white rounded-lg shadow-md hover:bg-indigo-50 transition duration-150 focus:outline-none" onclick="toggleDay(${item.day})">
                        <span class="text-lg font-bold ${item.day === 6 ? 'text-amber-600' : 'text-indigo-700'}">${item.day === 6 ? 'ğŸ”¥ ' : ''}Day ${item.day}: ${item.title}</span>
                        <span class="text-sm font-medium text-gray-500">${item.date} (${item.location})</span>
                        <span id="icon-${item.day}" class="text-xl text-indigo-500">â–¼</span>
                    </button>

                    <div id="details-${item.day}" class="p-4 mt-2 ml-5 bg-white rounded-lg border border-indigo-100 hidden">
                        <h4 class="text-md font-semibold text-gray-700 mb-2">ğŸšŒ äº¤é€š/ä½å®¿ï¼š<span class="text-indigo-600 font-normal">${item.transport}</span></h4>
                        <p class="text-gray-600 mb-3">${item.details}</p>
                        <h4 class="text-md font-semibold text-gray-700 mb-1">ğŸ“‹ ç•¶æ—¥æ´»å‹•:</h4>
                        <ul class="list-disc list-inside text-gray-600 pl-4 space-y-1">
                            ${item.activities.map(act => `<li>${act}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `).join('');
        }

        function toggleDay(dayId) {
            const detailsElement = document.getElementById(`details-${dayId}`);
            const iconElement = document.getElementById(`icon-${dayId}`);

            if (detailsElement.classList.contains('hidden')) {
                // Collapse all others and expand this one
                document.querySelectorAll('[id^="details-"]').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('[id^="icon-"]').forEach(el => el.textContent = 'â–¼');

                detailsElement.classList.remove('hidden');
                iconElement.textContent = 'â–²';
            } else {
                detailsElement.classList.add('hidden');
                iconElement.textContent = 'â–¼';
            }
        }

        // 3. Chart.js Implementation (Cost Breakdown Donut Chart)
        function renderCostChart() {
            const ctx = document.getElementById('costBreakdownChart').getContext('2d');
            const data = TRIP_DATA.costBreakdown;

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: data.map(d => d.label),
                    datasets: [{
                        data: data.map(d => d.amount),
                        backgroundColor: data.map(d => d.color),
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: { size: 13, family: 'Inter' }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed;
                                    const percentage = data[context.dataIndex].percentage.toFixed(2);
                                    return `${label}: â‚¬${new Intl.NumberFormat('en-US').format(value)} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
